<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A Stream represents a chain of operators that work on a flow of data. The type of the elements that is leaving the stream is `Out`."><meta name="keywords" content="rust, rustlang, rust-lang, Stream"><title>Stream in rstream - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../rstream/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Struct Stream</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#implementations">Methods</a><div class="sidebar-links"><a href="#method.add_operator">add_operator</a><a href="#method.add_timestamps">add_timestamps</a><a href="#method.batch_mode">batch_mode</a><a href="#method.broadcast">broadcast</a><a href="#method.collect_vec">collect_vec</a><a href="#method.concat">concat</a><a href="#method.filter">filter</a><a href="#method.filter_map">filter_map</a><a href="#method.flat_map">flat_map</a><a href="#method.flatten">flatten</a><a href="#method.fold">fold</a><a href="#method.fold_assoc">fold_assoc</a><a href="#method.for_each">for_each</a><a href="#method.group_by">group_by</a><a href="#method.group_by_avg">group_by_avg</a><a href="#method.group_by_count">group_by_count</a><a href="#method.group_by_fold">group_by_fold</a><a href="#method.group_by_max_element">group_by_max_element</a><a href="#method.group_by_min_element">group_by_min_element</a><a href="#method.group_by_reduce">group_by_reduce</a><a href="#method.group_by_sum">group_by_sum</a><a href="#method.interval_join">interval_join</a><a href="#method.iterate">iterate</a><a href="#method.join">join</a><a href="#method.join_with">join_with</a><a href="#method.key_by">key_by</a><a href="#method.left_join">left_join</a><a href="#method.map">map</a><a href="#method.max_parallelism">max_parallelism</a><a href="#method.outer_join">outer_join</a><a href="#method.reduce">reduce</a><a href="#method.reduce_assoc">reduce_assoc</a><a href="#method.replay">replay</a><a href="#method.rich_filter_map">rich_filter_map</a><a href="#method.rich_flat_map">rich_flat_map</a><a href="#method.rich_map">rich_map</a><a href="#method.shuffle">shuffle</a><a href="#method.split">split</a><a href="#method.window_all">window_all</a><a href="#method.zip">zip</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a><a href="#impl-UnsafeAny">UnsafeAny</a><a href="#impl-VZip%3CV%3E">VZip&lt;V&gt;</a></div></div><p class="location"><a href="index.html">rstream</a></p><div id="sidebar-vars" data-name="Stream" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Struct <a href="index.html">rstream</a>::<wbr><a class="struct" href="">Stream</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/rstream/stream.rs.html#32-40" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust struct">pub struct Stream&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;,&nbsp;</span> { /* fields omitted */ }</pre></div><div class="docblock"><p>A Stream represents a chain of operators that work on a flow of data. The type of the elements
that is leaving the stream is <code>Out</code>.</p>
<p>Internally a stream is composed by a chain of blocks, each of which can be seen as a simpler
stream with input and output types.</p>
<p>A block is internally composed of a chain of operators, nested like the <code>Iterator</code> from <code>std</code>.
The type of the chain inside the block is <code>OperatorChain</code> and it’s required as type argument of
the stream. This type only represents the chain inside the last block of the stream, not all the
blocks inside of it.</p>
</div><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl" class="anchor"></a><a class="srclink" href="../src/rstream/operator/add_timestamps.rs.html#82-125" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.add_timestamps" class="method"><code>pub fn <a href="#method.add_timestamps" class="fnname">add_timestamps</a>&lt;TimestampGen, WatermarkGen&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;timestamp_gen: TimestampGen, <br>&nbsp;&nbsp;&nbsp;&nbsp;watermark_gen: WatermarkGen<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;TimestampGen: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; <a class="type" href="operator/type.Timestamp.html" title="type rstream::operator::Timestamp">Timestamp</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;WatermarkGen: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out, &amp;<a class="type" href="operator/type.Timestamp.html" title="type rstream::operator::Timestamp">Timestamp</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="operator/type.Timestamp.html" title="type rstream::operator::Timestamp">Timestamp</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,&nbsp;</span></code><a href="#method.add_timestamps" class="anchor"></a><a class="srclink" href="../src/rstream/operator/add_timestamps.rs.html#114-124" title="goto source code">[src]</a></h4><div class="docblock"><p>Given a stream without timestamps nor watermarks, tag each item with a timestamp and insert
watermarks.</p>
<p>The two functions given to this operator are the following:</p>
<ul>
<li><code>timestamp_gen</code> returns the timestamp assigned to the provided element of the stream</li>
<li><code>watermark_gen</code> returns an optional watermark to add after the provided element</li>
</ul>
<p>Note that the two functions <strong>must</strong> follow the watermark semantics.
TODO: link to watermark semantics</p>
<h2 id="example" class="section-header"><a href="#example">Example</a></h2>
<p>In this example the stream contains the integers from 0 to 9, each will be tagged with a
timestamp with the value of the item as milliseconds, and after each even number a watermark
will be inserted.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rstream::operator::Timestamp</span>;

<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="ident">s</span>.<span class="ident">add_timestamps</span>(
    <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">Timestamp::from_millis</span>(<span class="ident">n</span>),
    <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span>, <span class="kw-2">&amp;</span><span class="ident">ts</span><span class="op">|</span> <span class="kw">if</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span> <span class="op">=</span><span class="op">=</span> <span class="number">0</span> { <span class="prelude-val">Some</span>(<span class="ident">ts</span>) } <span class="kw">else</span> { <span class="prelude-val">None</span> }
);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-1" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-1" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#6-54" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_min_element" class="method"><code>pub fn <a href="#method.group_by_min_element" class="fnname">group_by_min_element</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Value:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>, Keyer, GetValue&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_value: GetValue<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Out&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key,<br>&nbsp;&nbsp;&nbsp;&nbsp;GetValue: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Value, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Value,&nbsp;</span></code><a href="#method.group_by_min_element" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#39-53" title="goto source code">[src]</a></h4><div class="docblock"><p>Find, for each partition of the stream, the item with the smallest value.</p>
<p>The stream is partitioned using the <code>keyer</code> function and the value to compare is obtained
with <code>get_value</code>.</p>
<p>This operation is associative, therefore the computation is done in parallel before sending
all the elements to the network.</p>
<p><strong>Note</strong>: the comparison is done using the value returned by <code>get_value</code>, but the resulting
items have the same type as the input.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-1" class="section-header"><a href="#example-1">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_min_element</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-2" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-2" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#56-104" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_max_element" class="method"><code>pub fn <a href="#method.group_by_max_element" class="fnname">group_by_max_element</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Value:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>, Keyer, GetValue&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_value: GetValue<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Out&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key,<br>&nbsp;&nbsp;&nbsp;&nbsp;GetValue: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Value, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Value,&nbsp;</span></code><a href="#method.group_by_max_element" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#89-103" title="goto source code">[src]</a></h4><div class="docblock"><p>Find, for each partition of the stream, the item with the largest value.</p>
<p>The stream is partitioned using the <code>keyer</code> function and the value to compare is obtained
with <code>get_value</code>.</p>
<p>This operation is associative, therefore the computation is done in parallel before sending
all the elements to the network.</p>
<p><strong>Note</strong>: the comparison is done using the value returned by <code>get_value</code>, but the resulting
items have the same type as the input.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-2" class="section-header"><a href="#example-2">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_max_element</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">4</span>), (<span class="number">1</span>, <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-3" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-3" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#106-172" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_sum" class="method"><code>pub fn <a href="#method.group_by_sum" class="fnname">group_by_sum</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Value, Keyer, GetValue&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_value: GetValue<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Value, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Value&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key,<br>&nbsp;&nbsp;&nbsp;&nbsp;GetValue: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Value, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Value,<br>&nbsp;&nbsp;&nbsp;&nbsp;Value: <a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.AddAssign.html" title="trait core::ops::arith::AddAssign">AddAssign</a>,&nbsp;</span></code><a href="#method.group_by_sum" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#141-171" title="goto source code">[src]</a></h4><div class="docblock"><p>Find, for each partition of the stream, the sum of the values of the items.</p>
<p>The stream is partitioned using the <code>keyer</code> function and the value to sum is obtained
with <code>get_value</code>.</p>
<p>This operation is associative, therefore the computation is done in parallel before sending
all the elements to the network.</p>
<p><strong>Note</strong>: this is similar to the SQL: <code>SELECT SUM(value) ... GROUP BY key</code></p>
<p><strong>Note</strong>: the type of the result does not have to be a number, any type that implements
<code>AddAssign</code> is accepted.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-3" class="section-header"><a href="#example-3">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_sum</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">4</span>), (<span class="number">1</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-4" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-4" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#174-243" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_avg" class="method"><code>pub fn <a href="#method.group_by_avg" class="fnname">group_by_avg</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Value, Keyer, GetValue&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_value: GetValue<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Value, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Value&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key,<br>&nbsp;&nbsp;&nbsp;&nbsp;GetValue: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Value, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Value,<br>&nbsp;&nbsp;&nbsp;&nbsp;Value: <a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.AddAssign.html" title="trait core::ops::arith::AddAssign">AddAssign</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/arith/trait.Div.html" title="trait core::ops::arith::Div">Div</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.f64.html">f64</a>, Output = Value&gt;,&nbsp;</span></code><a href="#method.group_by_avg" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#209-242" title="goto source code">[src]</a></h4><div class="docblock"><p>Find, for each partition of the stream, the average of the values of the items.</p>
<p>The stream is partitioned using the <code>keyer</code> function and the value to average is obtained
with <code>get_value</code>.</p>
<p>This operation is associative, therefore the computation is done in parallel before sending
all the elements to the network.</p>
<p><strong>Note</strong>: this is similar to the SQL: <code>SELECT AVG(value) ... GROUP BY key</code></p>
<p><strong>Note</strong>: the type of the result does not have to be a number, any type that implements
<code>AddAssign</code> and can be divided by <code>f64</code> is accepted.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-4" class="section-header"><a href="#example-4">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_avg</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="kw">as</span> <span class="ident">f64</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_by_key</span>(<span class="op">|</span>(<span class="ident">k</span>, <span class="kw">_</span>)<span class="op">|</span> <span class="kw-2">*</span><span class="ident">k</span>);
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, (<span class="number">0.0</span> <span class="op">+</span> <span class="number">2.0</span> <span class="op">+</span> <span class="number">4.0</span>) <span class="op">/</span> <span class="number">3.0</span>), (<span class="number">1</span>, (<span class="number">1.0</span> <span class="op">+</span> <span class="number">3.0</span>) <span class="op">/</span> <span class="number">2.0</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-5" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-5" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#245-290" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_count" class="method"><code>pub fn <a href="#method.group_by_count" class="fnname">group_by_count</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Keyer&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key,&nbsp;</span></code><a href="#method.group_by_count" class="anchor"></a><a class="srclink" href="../src/rstream/operator/aggregators.rs.html#276-289" title="goto source code">[src]</a></h4><div class="docblock"><p>Count, for each partition of the stream, the number of items.</p>
<p>The stream is partitioned using the <code>keyer</code> function.</p>
<p>This operation is associative, therefore the computation is done in parallel before sending
all the elements to the network.</p>
<p><strong>Note</strong>: this is similar to the SQL: <code>SELECT COUNT(*) ... GROUP BY key</code></p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-5" class="section-header"><a href="#example-5">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_count</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_by_key</span>(<span class="op">|</span>(<span class="ident">k</span>, <span class="kw">_</span>)<span class="op">|</span> <span class="kw-2">*</span><span class="ident">k</span>);
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-6" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-6" class="anchor"></a><a class="srclink" href="../src/rstream/operator/batch_mode.rs.html#5-29" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.batch_mode" class="method"><code>pub fn <a href="#method.batch_mode" class="fnname">batch_mode</a>(self, batch_mode: <a class="enum" href="enum.BatchMode.html" title="enum rstream::BatchMode">BatchMode</a>) -&gt; Self</code><a href="#method.batch_mode" class="anchor"></a><a class="srclink" href="../src/rstream/operator/batch_mode.rs.html#25-28" title="goto source code">[src]</a></h4><div class="docblock"><p>Change the batch mode for this stream.</p>
<p>This change will be propagated to all the operators following, even of the next blocks,
until it’s changed again.</p>
<h2 id="example-6" class="section-header"><a href="#example-6">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">rstream::BatchMode</span>;

<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="ident">s</span>.<span class="ident">batch_mode</span>(<span class="ident">BatchMode::fixed</span>(<span class="number">1024</span>));</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-7" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-7" class="anchor"></a><a class="srclink" href="../src/rstream/operator/broadcast.rs.html#6-29" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.broadcast" class="method"><code>pub fn <a href="#method.broadcast" class="fnname">broadcast</a>(self) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt;</code><a href="#method.broadcast" class="anchor"></a><a class="srclink" href="../src/rstream/operator/broadcast.rs.html#26-28" title="goto source code">[src]</a></h4><div class="docblock"><p>Duplicate each element of the stream and forward it to all the replicas of the next block.</p>
<p><strong>Note</strong>: this will duplicate the elements of the stream, this is potentially a very
expensive operation.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-7" class="section-header"><a href="#example-7">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="ident">s</span>.<span class="ident">broadcast</span>();</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-8" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-8" class="anchor"></a><a class="srclink" href="../src/rstream/operator/concat.rs.html#14-74" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.concat" class="method"><code>pub fn <a href="#method.concat" class="fnname">concat</a>&lt;OperatorChain2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;oth: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain2&gt;<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#method.concat" class="anchor"></a><a class="srclink" href="../src/rstream/operator/concat.rs.html#40-58" title="goto source code">[src]</a></h4><div class="docblock"><p>Concatenate the items of this stream with the items of another stream with the same type.</p>
<p><strong>Note</strong>: the order of the resulting items is not specified.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-8" class="section-header"><a href="#example-8">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">10</span>..<span class="number">20</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">concat</span>(<span class="ident">s2</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, (<span class="number">0</span>..<span class="number">20</span>).<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span><span class="op">&gt;</span>());</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-9" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-9" class="anchor"></a><a class="srclink" href="../src/rstream/operator/filter.rs.html#68-95" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.filter" class="method"><code>pub fn <a href="#method.filter" class="fnname">filter</a>&lt;Predicate&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;predicate: Predicate<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Predicate: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,&nbsp;</span></code><a href="#method.filter" class="anchor"></a><a class="srclink" href="../src/rstream/operator/filter.rs.html#89-94" title="goto source code">[src]</a></h4><div class="docblock"><p>Remove from the stream all the elements for which the provided predicate returns <code>false</code>.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.filter"><code>Iteartor::filter</code></a></p>
<h2 id="example-9" class="section-header"><a href="#example-9">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">filter</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span> <span class="op">=</span><span class="op">=</span> <span class="number">0</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>])</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-10" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-10" class="anchor"></a><a class="srclink" href="../src/rstream/operator/filter_map.rs.html#4-32" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.filter_map" class="method"><code>pub fn <a href="#method.filter_map" class="fnname">filter_map</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(Out) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;NewOut&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.filter_map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/filter_map.rs.html#26-31" title="goto source code">[src]</a></h4><div class="docblock"><p>Remove from the stream all the elements for which the provided function returns <code>None</code> and
keep the elements that returned <code>Some(_)</code>.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.filter_map"><code>Iteartor::filter_map</code></a></p>
<h2 id="example-10" class="section-header"><a href="#example-10">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">filter_map</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="kw">if</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span> <span class="op">=</span><span class="op">=</span> <span class="number">0</span> { <span class="prelude-val">Some</span>(<span class="ident">n</span> <span class="op">*</span> <span class="number">3</span>) } <span class="kw">else</span> { <span class="prelude-val">None</span> }).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">24</span>])</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-11" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain, NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Out: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = NewOut&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Out as <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html#associatedtype.IntoIter" title="type core::iter::traits::collect::IntoIterator::IntoIter">IntoIter</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-11" class="anchor"></a><a class="srclink" href="../src/rstream/operator/flatten.rs.html#97-127" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.flatten" class="method"><code>pub fn <a href="#method.flatten" class="fnname">flatten</a>(self) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt;</code><a href="#method.flatten" class="anchor"></a><a class="srclink" href="../src/rstream/operator/flatten.rs.html#124-126" title="goto source code">[src]</a></h4><div class="docblock"><p>Transform this stream of containers into a stream of all the contained values.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.flatten"><code>Iteartor::flatten</code></a></p>
<h2 id="example-11" class="section-header"><a href="#example-11">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="macro">vec!</span>[
    <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],
    <span class="macro">vec!</span>[],
    <span class="macro">vec!</span>[<span class="number">4</span>, <span class="number">5</span>],
].<span class="ident">into_iter</span>()));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">flatten</span>().<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-12" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-12" class="anchor"></a><a class="srclink" href="../src/rstream/operator/flatten.rs.html#129-162" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.flat_map" class="method"><code>pub fn <a href="#method.flat_map" class="fnname">flat_map</a>&lt;MapOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;MapOut: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = NewOut&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;MapOut as <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html#associatedtype.IntoIter" title="type core::iter::traits::collect::IntoIterator::IntoIter">IntoIter</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(Out) -&gt; MapOut + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.flat_map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/flatten.rs.html#151-161" title="goto source code">[src]</a></h4><div class="docblock"><p>Apply a mapping operation to each element of the stream, the resulting stream will be the
flattened values of the result of the mapping.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.flat_map"><code>Iteartor::flat_map</code></a></p>
<h2 id="example-12" class="section-header"><a href="#example-12">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">3</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">flat_map</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="macro">vec!</span>[<span class="ident">n</span>, <span class="ident">n</span>]).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-13" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-13" class="anchor"></a><a class="srclink" href="../src/rstream/operator/fold.rs.html#126-224" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.fold" class="method"><code>pub fn <a href="#method.fold" class="fnname">fold</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;init: NewOut, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Out: <a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>NewOut, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.fold" class="anchor"></a><a class="srclink" href="../src/rstream/operator/fold.rs.html#165-172" title="goto source code">[src]</a></h4><div class="docblock"><p>Fold the stream into a stream that emits a single value.</p>
<p>The folding operator consists in adding to the current accumulation value (initially the
value provided as <code>init</code>) the value of the current item in the stream.</p>
<p>The folding function is provided with a mutable reference to the current accumulator and the
owned item of the stream. The function should modify the accumulator without returning
anything.</p>
<p>Note that the output type may be different from the input type. Consider using
<a href="struct.Stream.html#method.reduce" title="Stream::reduce"><code>Stream::reduce</code></a> if the output type is the same as the input type.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator is not parallelized, it creates a bottleneck where all the stream
elements are sent to and the folding is done using a single thread.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.fold"><code>Iteartor::fold</code></a>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-13" class="section-header"><a href="#example-13">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">fold</span>(<span class="number">0</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span> <span class="op">+</span> <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span>]);</pre></div>
</div><h4 id="method.fold_assoc" class="method"><code>pub fn <a href="#method.fold_assoc" class="fnname">fold_assoc</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, Local, Global&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;init: NewOut, <br>&nbsp;&nbsp;&nbsp;&nbsp;local: Local, <br>&nbsp;&nbsp;&nbsp;&nbsp;global: Global<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Local: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>NewOut, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Global: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>NewOut, NewOut) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.fold_assoc" class="anchor"></a><a class="srclink" href="../src/rstream/operator/fold.rs.html#210-223" title="goto source code">[src]</a></h4><div class="docblock"><p>Fold the stream into a stream that emits a single value.</p>
<p>The folding operator consists in adding to the current accumulation value (initially the
value provided as <code>init</code>) the value of the current item in the stream.</p>
<p>This method is very similary to <a href="struct.Stream.html#method.fold" title="Stream::fold"><code>Stream::fold</code></a>, but performs the folding distributely. To
do so the folding function must be <em>associative</em>, in particular the folding process is
performed in 2 steps:</p>
<ul>
<li><code>local</code>: the local function is used to fold the elements present in each replica of the
stream independently. All those replicas will start with the same <code>init</code> value.</li>
<li><code>global</code>: all the partial results (the elements produced by the <code>local</code> step) have to be
aggregated into a single result. This is done using the <code>global</code> folding function.</li>
</ul>
<p>Note that the output type may be different from the input type, therefore requireing
different function for the aggregation. Consider using <a href="struct.Stream.html#method.reduce_assoc" title="Stream::reduce_assoc"><code>Stream::reduce_assoc</code></a> if the
output type is the same as the input type.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-14" class="section-header"><a href="#example-14">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">fold_assoc</span>(<span class="number">0</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span> <span class="op">+</span> <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-14" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-14" class="anchor"></a><a class="srclink" href="../src/rstream/operator/group_by.rs.html#7-46" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by" class="method"><code>pub fn <a href="#method.group_by" class="fnname">group_by</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.DataKey.html" title="trait rstream::operator::DataKey">DataKey</a>, Keyer&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Out&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,&nbsp;</span></code><a href="#method.group_by" class="anchor"></a><a class="srclink" href="../src/rstream/operator/group_by.rs.html#33-45" title="goto source code">[src]</a></h4><div class="docblock"><p>Given a stream, make a <a href="struct.KeyedStream.html" title="KeyedStream"><code>KeyedStream</code></a> partitioning the values according to a key generated
by the <code>keyer</code> function provided.</p>
<p>The returned <a href="struct.KeyedStream.html" title="KeyedStream"><code>KeyedStream</code></a> is partitioned by key, and all the operators added to it will
be evaluated <em>after</em> the network shuffle. Therefore all the items are sent to the network
(if their destination is not the local host). In many cases this behaviour can be avoided by
using the associative variant of the operators (e.g. <a href="struct.Stream.html#method.group_by_reduce" title="Stream::group_by_reduce"><code>Stream::group_by_reduce</code></a>,
<a href="struct.Stream.html#method.group_by_sum" title="Stream::group_by_sum"><code>Stream::group_by_sum</code></a>, …).</p>
<p><strong>Note</strong>: the keys are not sent to the network, they are built on the sending side, and
rebuilt on the receiving side.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-15" class="section-header"><a href="#example-15">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">keyed</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">group_by</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>); <span class="comment">// partition even and odd elements</span></pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-15" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-15" class="anchor"></a><a class="srclink" href="../src/rstream/operator/interval_join.rs.html#195-230" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.interval_join" class="method"><code>pub fn <a href="#method.interval_join" class="fnname">interval_join</a>&lt;Out2, OperatorChain2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;right: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;lower_bound: <a class="struct" href="https://doc.rust-lang.org/nightly/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;upper_bound: <a class="struct" href="https://doc.rust-lang.org/nightly/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a><br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Out, Out2<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Out, Out2<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Out2: <a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt; + 'static,&nbsp;</span></code><a href="#method.interval_join" class="anchor"></a><a class="srclink" href="../src/rstream/operator/interval_join.rs.html#212-229" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two streams <strong>with timestamps</strong> join them according to an interval centered around the
timestamp of the left side.</p>
<p>This means that an element on the left side with timestamp T will be joined to all the
elements on the right with timestamp Q such that <code>T - lower_bound &lt;= Q &lt;= T + upper_bound</code>.</p>
<p><strong>Note</strong>: this operator is not parallelized, all the elements are sent to a single node to
perform the join.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-16" class="section-header"><a href="#example-16">Example</a></h2>
<p>TODO: example</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-16" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-16" class="anchor"></a><a class="srclink" href="../src/rstream/operator/iteration/iterate.rs.html#92-318" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.iterate" class="method"><code>pub fn <a href="#method.iterate" class="fnname">iterate</a>&lt;Body, DeltaUpdate:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>, State:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_iterations: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial_state: State, <br>&nbsp;&nbsp;&nbsp;&nbsp;body: Body, <br>&nbsp;&nbsp;&nbsp;&nbsp;local_fold: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>DeltaUpdate, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;global_fold: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>State, DeltaUpdate) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;loop_condition: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>State) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static<br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;State, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;State&gt;&gt;, <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Body: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, Iterate&lt;Out, State, OperatorChain&gt;&gt;, <a class="struct" href="struct.IterationStateHandle.html" title="struct rstream::IterationStateHandle">IterationStateHandle</a>&lt;State&gt;) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#method.iterate" class="anchor"></a><a class="srclink" href="../src/rstream/operator/iteration/iterate.rs.html#147-317" title="goto source code">[src]</a></h4><div class="docblock"><p>Construct an iterative dataflow where the input stream is fed inside a cycle. What comes
out of the loop will be fed back at the next iteration.</p>
<p>This iteration is stateful, this means that all the replicas have a read-only access to the
<em>iteration state</em>. The initial value of the state is given as parameter. When an iteration
ends all the elements are reduced locally at each replica producing a <code>DeltaUpdate</code>. Those
delta updates are later reduced on a single node that, using the <code>global_fold</code> function will
compute the state for the next iteration. This state is also used in <code>loop_condition</code> to
check whether the next iteration should start or not. <code>loop_condition</code> is also allowed to
mutate the state.</p>
<p>The initial value of <code>DeltaUpdate</code> is initialized with <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" title="Default::default()"><code>Default::default()</code></a>.</p>
<p>The content of the loop has a new scope: it’s defined by the <code>body</code> function that takes as
parameter the stream of data coming inside the iteration and a reference to the state. This
function should return the stream of the data that exits from the loop (that will be fed
back).</p>
<p>This construct produces two stream:</p>
<ul>
<li>the first is a stream with a single item: the final state of the iteration</li>
<li>the second if the set of elements that exited the loop during the last iteration (i.e. the
ones that should have been fed back in the next iteration).</li>
</ul>
<p><strong>Note</strong>: due to an internal limitation, it’s not currently possible to add an iteration
operator when the stream has limited parallelism. This means, for example, that after a
non-parallel source you have to add a shuffle.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-17" class="section-header"><a href="#example-17">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">3</span>)).<span class="ident">shuffle</span>();
<span class="kw">let</span> (<span class="ident">state</span>, <span class="ident">items</span>) <span class="op">=</span> <span class="ident">s</span>.<span class="ident">iterate</span>(
    <span class="number">3</span>, <span class="comment">// at most 3 iterations</span>
    <span class="number">0</span>, <span class="comment">// the initial state is zero</span>
    <span class="op">|</span><span class="ident">s</span>, <span class="ident">state</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">+</span> <span class="number">10</span>),
    <span class="op">|</span><span class="ident">delta</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">i32</span>, <span class="ident">n</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">delta</span> <span class="op">+</span><span class="op">=</span> <span class="ident">n</span>,
    <span class="op">|</span><span class="ident">state</span>, <span class="ident">delta</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">state</span> <span class="op">+</span><span class="op">=</span> <span class="ident">delta</span>,
    <span class="op">|</span><span class="ident">_state</span><span class="op">|</span> <span class="bool-val">true</span>,
);
<span class="kw">let</span> <span class="ident">state</span> <span class="op">=</span> <span class="ident">state</span>.<span class="ident">collect_vec</span>();
<span class="kw">let</span> <span class="ident">items</span> <span class="op">=</span> <span class="ident">items</span>.<span class="ident">collect_vec</span>();
<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">state</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">10</span> <span class="op">+</span> <span class="number">11</span> <span class="op">+</span> <span class="number">12</span> <span class="op">+</span> <span class="number">20</span> <span class="op">+</span> <span class="number">21</span> <span class="op">+</span> <span class="number">22</span> <span class="op">+</span> <span class="number">30</span> <span class="op">+</span> <span class="number">31</span> <span class="op">+</span> <span class="number">32</span>]);
<span class="macro">assert_eq!</span>(<span class="ident">items</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-17" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-17" class="anchor"></a><a class="srclink" href="../src/rstream/operator/iteration/replay.rs.html#66-214" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.replay" class="method"><code>pub fn <a href="#method.replay" class="fnname">replay</a>&lt;Body, DeltaUpdate:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>, State:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;num_iterations: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial_state: State, <br>&nbsp;&nbsp;&nbsp;&nbsp;body: Body, <br>&nbsp;&nbsp;&nbsp;&nbsp;local_fold: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>DeltaUpdate, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;global_fold: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>State, DeltaUpdate) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;loop_condition: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>State) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;State, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;State&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Body: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, Replay&lt;Out, State, OperatorChain&gt;&gt;, <a class="struct" href="struct.IterationStateHandle.html" title="struct rstream::IterationStateHandle">IterationStateHandle</a>&lt;State&gt;) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#method.replay" class="anchor"></a><a class="srclink" href="../src/rstream/operator/iteration/replay.rs.html#116-213" title="goto source code">[src]</a></h4><div class="docblock"><p>Construct an iterative dataflow where the input stream is repeatedly fed inside a cycle,
i.e. what comes into the cycle is <em>replayed</em> at every iteration.</p>
<p>This iteration is stateful, this means that all the replicas have a read-only access to the
<em>iteration state</em>. The initial value of the state is given as parameter. When an iteration
ends all the elements are reduced locally at each replica producing a <code>DeltaUpdate</code>. Those
delta updates are later reduced on a single node that, using the <code>global_fold</code> function will
compute the state for the next iteration. This state is also used in <code>loop_condition</code> to
check whether the next iteration should start or not. <code>loop_condition</code> is also allowed to
mutate the state.</p>
<p>The initial value of <code>DeltaUpdate</code> is initialized with <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" title="Default::default()"><code>Default::default()</code></a>.</p>
<p>The content of the loop has a new scope: it’s defined by the <code>body</code> function that takes as
parameter the stream of data coming inside the iteration and a reference to the state. This
function should return the stream of the data that exits from the loop (that will be fed
back).</p>
<p>This construct produces a single stream with a single element: the final state of the
iteration.</p>
<p><strong>Note</strong>: due to an internal limitation, it’s not currently possible to add an iteration
operator when the stream has limited parallelism. This means, for example, that after a
non-parallel source you have to add a shuffle.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-18" class="section-header"><a href="#example-18">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">3</span>)).<span class="ident">shuffle</span>();
<span class="kw">let</span> <span class="ident">state</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">replay</span>(
    <span class="number">3</span>, <span class="comment">// at most 3 iterations</span>
    <span class="number">0</span>, <span class="comment">// the initial state is zero</span>
    <span class="op">|</span><span class="ident">s</span>, <span class="ident">state</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">+</span> <span class="number">10</span>),
    <span class="op">|</span><span class="ident">delta</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">i32</span>, <span class="ident">n</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">delta</span> <span class="op">+</span><span class="op">=</span> <span class="ident">n</span>,
    <span class="op">|</span><span class="ident">state</span>, <span class="ident">delta</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">state</span> <span class="op">+</span><span class="op">=</span> <span class="ident">delta</span>,
    <span class="op">|</span><span class="ident">_state</span><span class="op">|</span> <span class="bool-val">true</span>,
);
<span class="kw">let</span> <span class="ident">state</span> <span class="op">=</span> <span class="ident">state</span>.<span class="ident">collect_vec</span>();
<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">state</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">3</span> <span class="op">*</span> (<span class="number">10</span> <span class="op">+</span> <span class="number">11</span> <span class="op">+</span> <span class="number">12</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-18" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-18" class="anchor"></a><a class="srclink" href="../src/rstream/operator/join/mod.rs.html#84-297" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.join" class="method"><code>pub fn <a href="#method.join" class="fnname">join</a>&lt;Out2:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2, Key, Keyer1, Keyer2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;rhs: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer1: Keyer1, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer2: Keyer2<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, <a class="type" href="operator/join/type.InnerJoinTuple.html" title="type rstream::operator::join::InnerJoinTuple">InnerJoinTuple</a>&lt;Out, Out2&gt;, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, <a class="type" href="operator/join/type.InnerJoinTuple.html" title="type rstream::operator::join::InnerJoinTuple">InnerJoinTuple</a>&lt;Out, Out2&gt;&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Key: <a class="trait" href="operator/trait.DataKey.html" title="trait rstream::operator::DataKey">DataKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt; + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer1: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer2: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out2) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out2&gt;,&nbsp;</span></code><a href="#method.join" class="anchor"></a><a class="srclink" href="../src/rstream/operator/join/mod.rs.html#114-134" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two stream, create a stream with all the pairs (left item from the left stream, right
item from the right), such that the key obtained with <code>keyer1</code> on an item from the left is
equal to the key obtained with <code>keyer2</code> on an item from the right.</p>
<p>This is an inner join, very similar to <code>SELECT a, b FROM a JOIN b ON keyer1(a) = keyer2(b)</code>.</p>
<p>This is a shortcut for: <code>self.join_with(...).ship_hash().local_hash().inner()</code>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-19" class="section-header"><a href="#example-19">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5u8</span>));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5i32</span>));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">join</span>(<span class="ident">s2</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> (<span class="ident">n</span> <span class="op">%</span> <span class="number">5</span>) <span class="kw">as</span> <span class="ident">i32</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">drop_key</span>().<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">4</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)]);</pre></div>
</div><h4 id="method.left_join" class="method"><code>pub fn <a href="#method.left_join" class="fnname">left_join</a>&lt;Out2:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2, Key, Keyer1, Keyer2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;rhs: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer1: Keyer1, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer2: Keyer2<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, <a class="type" href="operator/join/type.LeftJoinTuple.html" title="type rstream::operator::join::LeftJoinTuple">LeftJoinTuple</a>&lt;Out, Out2&gt;, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, <a class="type" href="operator/join/type.LeftJoinTuple.html" title="type rstream::operator::join::LeftJoinTuple">LeftJoinTuple</a>&lt;Out, Out2&gt;&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Key: <a class="trait" href="operator/trait.DataKey.html" title="trait rstream::operator::DataKey">DataKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt; + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer1: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer2: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out2) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out2&gt;,&nbsp;</span></code><a href="#method.left_join" class="anchor"></a><a class="srclink" href="../src/rstream/operator/join/mod.rs.html#166-186" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two stream, create a stream with all the pairs (left item from the left stream, right
item from the right), such that the key obtained with <code>keyer1</code> on an item from the left is
equal to the key obtained with <code>keyer2</code> on an item from the right.</p>
<p>This is a <strong>left</strong> join, meaning that if an item from the left does not find and element
from the right with which make a pair, an extra pair <code>(left, None)</code> is generated. If you
want to have a <em>right</em> join, you just need to switch the two sides and use a left join.</p>
<p>This is very similar to <code>SELECT a, b FROM a LEFT JOIN b ON keyer1(a) = keyer2(b)</code>.</p>
<p>This is a shortcut for: <code>self.join_with(...).ship_hash().local_hash().left()</code>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-20" class="section-header"><a href="#example-20">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5u8</span>));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5i32</span>));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">left_join</span>(<span class="ident">s2</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> (<span class="ident">n</span> <span class="op">%</span> <span class="number">5</span>) <span class="kw">as</span> <span class="ident">i32</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">drop_key</span>().<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="prelude-val">Some</span>(<span class="number">0</span>)), (<span class="number">0</span>, <span class="prelude-val">Some</span>(<span class="number">2</span>)), (<span class="number">0</span>, <span class="prelude-val">Some</span>(<span class="number">4</span>)), (<span class="number">1</span>, <span class="prelude-val">Some</span>(<span class="number">1</span>)), (<span class="number">1</span>, <span class="prelude-val">Some</span>(<span class="number">3</span>)), (<span class="number">2</span>, <span class="prelude-val">None</span>), (<span class="number">3</span>, <span class="prelude-val">None</span>), (<span class="number">4</span>, <span class="prelude-val">None</span>)]);</pre></div>
</div><h4 id="method.outer_join" class="method"><code>pub fn <a href="#method.outer_join" class="fnname">outer_join</a>&lt;Out2:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2, Key, Keyer1, Keyer2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;rhs: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer1: Keyer1, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer2: Keyer2<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, <a class="type" href="operator/join/type.OuterJoinTuple.html" title="type rstream::operator::join::OuterJoinTuple">OuterJoinTuple</a>&lt;Out, Out2&gt;, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, <a class="type" href="operator/join/type.OuterJoinTuple.html" title="type rstream::operator::join::OuterJoinTuple">OuterJoinTuple</a>&lt;Out, Out2&gt;&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Key: <a class="trait" href="operator/trait.DataKey.html" title="trait rstream::operator::DataKey">DataKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt; + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer1: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer2: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out2) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out2&gt;,&nbsp;</span></code><a href="#method.outer_join" class="anchor"></a><a class="srclink" href="../src/rstream/operator/join/mod.rs.html#219-239" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two stream, create a stream with all the pairs (left item from the left stream, right
item from the right), such that the key obtained with <code>keyer1</code> on an item from the left is
equal to the key obtained with <code>keyer2</code> on an item from the right.</p>
<p>This is a <strong>full-outer</strong> join, meaning that if an item from the left does not find and element
from the right with which make a pair, an extra pair <code>(left, None)</code> is generated. Similarly
if an element from the right does not appear in any pair, a new one is generated with
<code>(None, right)</code>.</p>
<p>This is very similar to <code>SELECT a, b FROM a FULL OUTER JOIN b ON keyer1(a) = keyer2(b)</code>.</p>
<p>This is a shortcut for: <code>self.join_with(...).ship_hash().local_hash().outer()</code>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-21" class="section-header"><a href="#example-21">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5u8</span>));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5i32</span>));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">outer_join</span>(<span class="ident">s2</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> (<span class="ident">n</span> <span class="op">%</span> <span class="number">5</span>) <span class="kw">as</span> <span class="ident">i32</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">drop_key</span>().<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="prelude-val">Some</span>(<span class="number">0</span>), <span class="prelude-val">Some</span>(<span class="number">0</span>)), (<span class="prelude-val">Some</span>(<span class="number">0</span>), <span class="prelude-val">Some</span>(<span class="number">2</span>)), (<span class="prelude-val">Some</span>(<span class="number">0</span>), <span class="prelude-val">Some</span>(<span class="number">4</span>)), (<span class="prelude-val">Some</span>(<span class="number">1</span>), <span class="prelude-val">Some</span>(<span class="number">1</span>)), (<span class="prelude-val">Some</span>(<span class="number">1</span>), <span class="prelude-val">Some</span>(<span class="number">3</span>)), (<span class="prelude-val">Some</span>(<span class="number">2</span>), <span class="prelude-val">None</span>), (<span class="prelude-val">Some</span>(<span class="number">3</span>), <span class="prelude-val">None</span>), (<span class="prelude-val">Some</span>(<span class="number">4</span>), <span class="prelude-val">None</span>)]);</pre></div>
</div><h4 id="method.join_with" class="method"><code>pub fn <a href="#method.join_with" class="fnname">join_with</a>&lt;Out2:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2, Key, Keyer1, Keyer2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;rhs: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer1: Keyer1, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer2: Keyer2<br>) -&gt; <a class="struct" href="operator/join/struct.JoinStream.html" title="struct rstream::operator::join::JoinStream">JoinStream</a>&lt;Key, Out, Out2, OperatorChain, OperatorChain2, Keyer1, Keyer2&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer1: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer2: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out2) -&gt; Key + <a class="trait" href="operator/trait.KeyerFn.html" title="trait rstream::operator::KeyerFn">KeyerFn</a>&lt;Key, Out2&gt;,&nbsp;</span></code><a href="#method.join_with" class="anchor"></a><a class="srclink" href="../src/rstream/operator/join/mod.rs.html#278-296" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two streams, start building a join operator.</p>
<p>The returned type allows you to customize the behaviour of the join. You can select which
ship strategy and which local strategy to use.</p>
<p><strong>Ship strategies</strong></p>
<ul>
<li><em>hash</em>: the hash of the key is used to select where to send the elements</li>
<li><em>broadcast right</em>: the left stream is left locally, while the right stream is broadcasted</li>
</ul>
<p><strong>Local strategies</strong></p>
<ul>
<li><em>hash</em>: build an hashmap to match the tuples</li>
<li><em>sort and merge</em>: collect all the tuples, sort them by key and merge them</li>
</ul>
<p>The first strategy to select is the <em>ship strategy</em>. After choosing that you have to select
the local strategy.</p>
<h2 id="example-22" class="section-header"><a href="#example-22">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5u8</span>));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5i32</span>));
<span class="kw">let</span> <span class="ident">j</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">join_with</span>(<span class="ident">s2</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> (<span class="ident">n</span> <span class="op">%</span> <span class="number">5</span>) <span class="kw">as</span> <span class="ident">i32</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">ship_hash</span>();</pre></div>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5u8</span>));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="number">0</span>..<span class="number">5i32</span>));
<span class="kw">let</span> <span class="ident">j</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">join_with</span>(<span class="ident">s2</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> (<span class="ident">n</span> <span class="op">%</span> <span class="number">5</span>) <span class="kw">as</span> <span class="ident">i32</span>, <span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">ship_broadcast_right</span>();</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-19" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-19" class="anchor"></a><a class="srclink" href="../src/rstream/operator/key_by.rs.html#76-109" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.key_by" class="method"><code>pub fn <a href="#method.key_by" class="fnname">key_by</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.DataKey.html" title="trait rstream::operator::DataKey">DataKey</a>, Keyer&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Out&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.key_by" class="anchor"></a><a class="srclink" href="../src/rstream/operator/key_by.rs.html#100-108" title="goto source code">[src]</a></h4><div class="docblock"><p>Construct a <a href="struct.KeyedStream.html" title="KeyedStream"><code>KeyedStream</code></a> from a <a href="struct.Stream.html" title="Stream"><code>Stream</code></a> without shuffling the data.</p>
<p><strong>Note</strong>: this violates the semantics of <a href="struct.KeyedStream.html" title="KeyedStream"><code>KeyedStream</code></a>, without sending all the values
with the same key to the same replica some of the following operators may misbehave. You
probably need to use <a href="struct.Stream.html#method.group_by" title="Stream::group_by"><code>Stream::group_by</code></a> instead.</p>
<h2 id="example-23" class="section-header"><a href="#example-23">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">key_by</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">4</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-20" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-20" class="anchor"></a><a class="srclink" href="../src/rstream/operator/keyed_fold.rs.html#147-225" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_fold" class="method"><code>pub fn <a href="#method.group_by_fold" class="fnname">group_by_fold</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, NewOut:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, Keyer, Local, Global&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;init: NewOut, <br>&nbsp;&nbsp;&nbsp;&nbsp;local: Local, <br>&nbsp;&nbsp;&nbsp;&nbsp;global: Global<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, NewOut&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Local: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>NewOut, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Global: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>NewOut, NewOut) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.group_by_fold" class="anchor"></a><a class="srclink" href="../src/rstream/operator/keyed_fold.rs.html#191-224" title="goto source code">[src]</a></h4><div class="docblock"><p>Perform the folding operation separately for each key.</p>
<p>This is equivalent of partitioning the stream using the <code>keyer</code> function, and then applying
<a href="struct.Stream.html#method.fold_assoc" title="Stream::fold_assoc"><code>Stream::fold_assoc</code></a> to each partition separately.</p>
<p>Note however that there is a difference between <code>stream.group_by(keyer).fold(...)</code> and
<code>stream.group_by_fold(keyer, ...)</code>. The first performs the network shuffle of every item in
the stream, and <strong>later</strong> performs the folding (i.e. nearly all the elements will be sent to
the network). The latter avoids sending the items by performing first a local reduction on
each host, and then send only the locally folded results (i.e. one message per replica, per
key); then the global step is performed aggregating the results.</p>
<p>The resulting stream will still be keyed and will contain only a single message per key (the
final result).</p>
<p>Note that the output type may be different from the input type, therefore requireing
different function for the aggregation. Consider using <a href="struct.Stream.html#method.group_by_reduce" title="Stream::group_by_reduce"><code>Stream::group_by_reduce</code></a> if the
output type is the same as the input type.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-24" class="section-header"><a href="#example-24">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_fold</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="number">0</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">4</span>), (<span class="number">1</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-21" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-21" class="anchor"></a><a class="srclink" href="../src/rstream/operator/keyed_reduce.rs.html#4-76" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.group_by_reduce" class="method"><code>pub fn <a href="#method.group_by_reduce" class="fnname">group_by_reduce</a>&lt;Key:&nbsp;<a class="trait" href="operator/trait.ExchangeDataKey.html" title="trait rstream::operator::ExchangeDataKey">ExchangeDataKey</a>, Keyer, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyer: Keyer, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.KeyedStream.html" title="struct rstream::KeyedStream">KeyedStream</a>&lt;Key, Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;Key, Out&gt;&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Keyer: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Out) -&gt; Key + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Out, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.group_by_reduce" class="anchor"></a><a class="srclink" href="../src/rstream/operator/keyed_reduce.rs.html#47-75" title="goto source code">[src]</a></h4><div class="docblock"><p>Perform the reduction operation separately for each key.</p>
<p>This is equivalent of partitioning the stream using the <code>keyer</code> function, and then applying
<a href="struct.Stream.html#method.reduce_assoc" title="Stream::reduce_assoc"><code>Stream::reduce_assoc</code></a> to each partition separately.</p>
<p>Note however that there is a difference between <code>stream.group_by(keyer).reduce(...)</code> and
<code>stream.group_by_reduce(keyer, ...)</code>. The first performs the network shuffle of every item in
the stream, and <strong>later</strong> performs the reduction (i.e. nearly all the elements will be sent to
the network). The latter avoids sending the items by performing first a local reduction on
each host, and then send only the locally reduced results (i.e. one message per replica, per
key); then the global step is performed aggregating the results.</p>
<p>The resulting stream will still be keyed and will contain only a single message per key (the
final result).</p>
<p>Note that the output type must be the same as the input type, if you need a different type
consider using <a href="struct.Stream.html#method.group_by_fold" title="Stream::group_by_fold"><code>Stream::group_by_fold</code></a>.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-25" class="section-header"><a href="#example-25">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">group_by_reduce</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">%</span> <span class="number">2</span>, <span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>)
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="ident">res</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">0</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">4</span>), (<span class="number">1</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-22" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-22" class="anchor"></a><a class="srclink" href="../src/rstream/operator/map.rs.html#67-94" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.map" class="method"><code>pub fn <a href="#method.map" class="fnname">map</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(self, f: F) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(Out) -&gt; NewOut + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/map.rs.html#88-93" title="goto source code">[src]</a></h4><div class="docblock"><p>Map the elements of the stream into new elements.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.map"><code>Iteartor::map</code></a>.</p>
<h2 id="example-26" class="section-header"><a href="#example-26">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="ident">n</span> <span class="op">*</span> <span class="number">10</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-23" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-23" class="anchor"></a><a class="srclink" href="../src/rstream/operator/max_parallelism.rs.html#6-24" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.max_parallelism" class="method"><code>pub fn <a href="#method.max_parallelism" class="fnname">max_parallelism</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;max_parallelism: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a><br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt;</code><a href="#method.max_parallelism" class="anchor"></a><a class="srclink" href="../src/rstream/operator/max_parallelism.rs.html#14-23" title="goto source code">[src]</a></h4><div class="docblock"><p>Change the maximum parallelism of the following operators.</p>
<p><strong>Note</strong>: this operator is pretty advanced, some operators may need to be fully replicated
and will fail otherwise.</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-24" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-24" class="anchor"></a><a class="srclink" href="../src/rstream/operator/reduce.rs.html#4-112" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.reduce" class="method"><code>pub fn <a href="#method.reduce" class="fnname">reduce</a>&lt;F&gt;(self, f: F) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Out, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.reduce" class="anchor"></a><a class="srclink" href="../src/rstream/operator/reduce.rs.html#43-52" title="goto source code">[src]</a></h4><div class="docblock"><p>Reduce the stream into a stream that emits a single value.</p>
<p>The reducing operator consists in adding to the current accumulation value  the value of the
current item in the stream.</p>
<p>The reducing function is provided with a mutable reference to the current accumulator and the
owned item of the stream. The function should modify the accumulator without returning
anything.</p>
<p>Note that the output type must be the same as the input type, if you need a different type
consider using <a href="struct.Stream.html#method.fold" title="Stream::fold"><code>Stream::fold</code></a>.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator is not parallelized, it creates a bottleneck where all the stream
elements are sent to and the folding is done using a single thread.</p>
<p><strong>Note</strong>: this is very similar to <a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html#method.reduce"><code>Iteartor::reduce</code></a>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-27" class="section-header"><a href="#example-27">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">reduce</span>(<span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span> <span class="op">+</span> <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span>]);</pre></div>
</div><h4 id="method.reduce_assoc" class="method"><code>pub fn <a href="#method.reduce_assoc" class="fnname">reduce_assoc</a>&lt;F&gt;(self, f: F) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Out, Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.reduce_assoc" class="anchor"></a><a class="srclink" href="../src/rstream/operator/reduce.rs.html#89-111" title="goto source code">[src]</a></h4><div class="docblock"><p>Reduce the stream into a stream that emits a single value.</p>
<p>The reducing operator consists in adding to the current accumulation value the value of the
current item in the stream.</p>
<p>This method is very similary to <a href="struct.Stream.html#method.reduce" title="Stream::reduce"><code>Stream::reduce</code></a>, but performs the reduction distributely.
To do so the reducing function must be <em>associative</em>, in particular the reducing process is
performed in 2 steps:</p>
<ul>
<li>local: the reducing function is used to reduce the elements present in each replica of
the stream independently.</li>
<li>global: all the partial results (the elements produced by the local step) have to be
aggregated into a single result.</li>
</ul>
<p>Note that the output type must be the same as the input type, if you need a different type
consider using <a href="struct.Stream.html#method.fold_assoc" title="Stream::fold_assoc"><code>Stream::fold_assoc</code></a>.</p>
<p><strong>Note</strong>: this operator will retain all the messages of the stream and emit the values only
when the stream ends. Therefore this is not properly <em>streaming</em>.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-28" class="section-header"><a href="#example-28">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">reduce_assoc</span>(<span class="op">|</span><span class="ident">acc</span>, <span class="ident">value</span><span class="op">|</span> <span class="kw-2">*</span><span class="ident">acc</span> <span class="op">+</span><span class="op">=</span> <span class="ident">value</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">0</span> <span class="op">+</span> <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-25" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-25" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_filter_map.rs.html#4-51" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.rich_filter_map" class="method"><code>pub fn <a href="#method.rich_filter_map" class="fnname">rich_filter_map</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(Out) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;NewOut&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.rich_filter_map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_filter_map.rs.html#45-50" title="goto source code">[src]</a></h4><div class="docblock"><p>Remove from the stream all the elements for which the provided function returns <code>None</code> and
keep the elements that returned <code>Some(_)</code>. The mapping function can be stateful.</p>
<p>This is equivalent to <a href="struct.Stream.html#method.filter_map" title="Stream::filter_map"><code>Stream::filter_map</code></a> but with a stateful function.</p>
<p>Since the mapping function can be stateful, it is a <code>FnMut</code>. This allows expressing simple
algorithms with very few lines of code (see examples).</p>
<p>The mapping function is <em>cloned</em> inside each replica, and they will not share state between
each other. If you want that only a single replica handles all the items you may want to
change the parallelism of this operator with <a href="struct.Stream.html#method.max_parallelism" title="Stream::max_parallelism"><code>Stream::max_parallelism</code></a>.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<p>This will emit only the <em>positive prefix-sums</em>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="ident">std::array::IntoIter::new</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="op">-</span><span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>])));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">rich_filter_map</span>({
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">sum</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">move</span> <span class="op">|</span><span class="ident">x</span><span class="op">|</span> {
        <span class="ident">sum</span> <span class="op">+</span><span class="op">=</span> <span class="ident">x</span>;
        <span class="kw">if</span> <span class="ident">sum</span> <span class="op">&gt;</span><span class="op">=</span> <span class="number">0</span> {
            <span class="prelude-val">Some</span>(<span class="ident">sum</span>)
        } <span class="kw">else</span> {
            <span class="prelude-val">None</span>
        }
    }
}).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span>, <span class="comment">/* 1 + 2 - 5, */</span> <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">-</span> <span class="number">5</span> <span class="op">+</span> <span class="number">3</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">-</span> <span class="number">5</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">1</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-26" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-26" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_flat_map.rs.html#4-56" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.rich_flat_map" class="method"><code>pub fn <a href="#method.rich_flat_map" class="fnname">rich_flat_map</a>&lt;MapOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;MapOut: <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = NewOut&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;MapOut as <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html#associatedtype.IntoIter" title="type core::iter::traits::collect::IntoIterator::IntoIter">IntoIter</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(Out) -&gt; MapOut + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.rich_flat_map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_flat_map.rs.html#45-55" title="goto source code">[src]</a></h4><div class="docblock"><p>Apply a mapping operation to each element of the stream, the resulting stream will be the
flattened values of the result of the mapping. The mapping function can be stateful.</p>
<p>This is equivalent to <a href="struct.Stream.html#method.flat_map" title="Stream::flat_map"><code>Stream::flat_map</code></a> but with a stateful function.</p>
<p>Since the mapping function can be stateful, it is a <code>FnMut</code>. This allows expressing simple
algorithms with very few lines of code (see examples).</p>
<p>The mapping function is <em>cloned</em> inside each replica, and they will not share state between
each other. If you want that only a single replica handles all the items you may want to
change the parallelism of this operator with <a href="struct.Stream.html#method.max_parallelism" title="Stream::max_parallelism"><code>Stream::max_parallelism</code></a>.</p>
<h2 id="examples-1" class="section-header"><a href="#examples-1">Examples</a></h2>
<p>This will emit only the <em>positive prefix-sums</em>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="op">=</span><span class="number">3</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">rich_flat_map</span>({
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">elements</span> <span class="op">=</span> <span class="ident">Vec::new</span>();
    <span class="kw">move</span> <span class="op">|</span><span class="ident">y</span><span class="op">|</span> {
        <span class="kw">let</span> <span class="ident">new_pairs</span> <span class="op">=</span> <span class="ident">elements</span>
            .<span class="ident">iter</span>()
            .<span class="ident">map</span>(<span class="op">|</span><span class="kw-2">&amp;</span><span class="ident">x</span>: <span class="kw-2">&amp;</span><span class="ident">u32</span><span class="op">|</span> (<span class="ident">x</span>, <span class="ident">y</span>))
            .<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span><span class="op">&gt;</span>();
        <span class="ident">elements</span>.<span class="ident">push</span>(<span class="ident">y</span>);
        <span class="ident">new_pairs</span>
    }
}).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-27" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-27" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_map.rs.html#84-151" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.rich_map" class="method"><code>pub fn <a href="#method.rich_map" class="fnname">rich_map</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(Out) -&gt; NewOut + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.rich_map" class="anchor"></a><a class="srclink" href="../src/rstream/operator/rich_map.rs.html#143-150" title="goto source code">[src]</a></h4><div class="docblock"><p>Map the elements of the stream into new elements. The mapping function can be stateful.</p>
<p>This is equivalent to <a href="struct.Stream.html#method.map" title="Stream::map"><code>Stream::map</code></a> but with a stateful function.</p>
<p>Since the mapping function can be stateful, it is a <code>FnMut</code>. This allows expressing simple
algorithms with very few lines of code (see examples).</p>
<p>The mapping function is <em>cloned</em> inside each replica, and they will not share state between
each other. If you want that only a single replica handles all the items you may want to
change the parallelism of this operator with <a href="struct.Stream.html#method.max_parallelism" title="Stream::max_parallelism"><code>Stream::max_parallelism</code></a>.</p>
<h2 id="examples-2" class="section-header"><a href="#examples-2">Examples</a></h2>
<p>This is a simple implementation of the prefix-sum using a single replica (i.e. each element
is mapped to the sum of all the elements up to that point). Note that this won’t work if
there are more replicas.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">1</span>..<span class="op">=</span><span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">rich_map</span>({
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">sum</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">move</span> <span class="op">|</span><span class="ident">x</span><span class="op">|</span> {
        <span class="ident">sum</span> <span class="op">+</span><span class="op">=</span> <span class="ident">x</span>;
        <span class="ident">sum</span>
    }
}).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span>, <span class="number">1</span> <span class="op">+</span> <span class="number">2</span> <span class="op">+</span> <span class="number">3</span> <span class="op">+</span> <span class="number">4</span> <span class="op">+</span> <span class="number">5</span>]);</pre></div>
<p>This will enumerate all the elements that reach a replica. This is basically equivalent to
the <code>enumerate</code> function in Python.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">1</span>..<span class="op">=</span><span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">rich_map</span>({
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">id</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">move</span> <span class="op">|</span><span class="ident">x</span><span class="op">|</span> {
        <span class="ident">id</span> <span class="op">+</span><span class="op">=</span> <span class="number">1</span>;
        (<span class="ident">id</span> <span class="op">-</span> <span class="number">1</span>, <span class="ident">x</span>)
    }
}).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">5</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-28" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-28" class="anchor"></a><a class="srclink" href="../src/rstream/operator/shuffle.rs.html#6-29" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.shuffle" class="method"><code>pub fn <a href="#method.shuffle" class="fnname">shuffle</a>(self) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt;</code><a href="#method.shuffle" class="anchor"></a><a class="srclink" href="../src/rstream/operator/shuffle.rs.html#26-28" title="goto source code">[src]</a></h4><div class="docblock"><p>Perform a network shuffle sending the messages to a random replica.</p>
<p>This can be useful if for some reason the load is very unbalanced (e.g. after a very
unbalanced <a href="struct.Stream.html#method.group_by" title="Stream::group_by"><code>Stream::group_by</code></a>).</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-29" class="section-header"><a href="#example-29">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">shuffle</span>();</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-29" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-29" class="anchor"></a><a class="srclink" href="../src/rstream/operator/sink/collect_vec.rs.html#71-108" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.collect_vec" class="method"><code>pub fn <a href="#method.collect_vec" class="fnname">collect_vec</a>(self) -&gt; <a class="struct" href="operator/sink/struct.StreamOutput.html" title="struct rstream::operator::sink::StreamOutput">StreamOutput</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Out&gt;&gt;</code><a href="#method.collect_vec" class="anchor"></a><a class="srclink" href="../src/rstream/operator/sink/collect_vec.rs.html#97-107" title="goto source code">[src]</a></h4><div class="docblock"><p>Close the stream and store all the resulting items into a <a href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="Vec"><code>Vec</code></a> on a single host.</p>
<p>If the stream is distributed among multiple replicas, a bottleneck is placed where all the
replicas sends the items to.</p>
<p><strong>Note</strong>: the order of items and keys is unspecified.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-30" class="section-header"><a href="#example-30">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">10</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), (<span class="number">0</span>..<span class="number">10</span>).<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span><span class="op">&gt;</span>());</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-30" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-30" class="anchor"></a><a class="srclink" href="../src/rstream/operator/sink/for_each.rs.html#62-90" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.for_each" class="method"><code>pub fn <a href="#method.for_each" class="fnname">for_each</a>&lt;F&gt;(self, f: F) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(Out) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + 'static,&nbsp;</span></code><a href="#method.for_each" class="anchor"></a><a class="srclink" href="../src/rstream/operator/sink/for_each.rs.html#79-89" title="goto source code">[src]</a></h4><div class="docblock"><p>Apply the given function to all the elements of the stream, consuming the stream.</p>
<h2 id="example-31" class="section-header"><a href="#example-31">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="ident">s</span>.<span class="ident">for_each</span>(<span class="op">|</span><span class="ident">n</span><span class="op">|</span> <span class="macro">println!</span>(<span class="string">&quot;Item: {}&quot;</span>, <span class="ident">n</span>));

<span class="ident">env</span>.<span class="ident">execute</span>();</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-31" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-31" class="anchor"></a><a class="srclink" href="../src/rstream/operator/split.rs.html#6-42" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.split" class="method"><code>pub fn <a href="#method.split" class="fnname">split</a>(self, splits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt;&gt;&gt;</code><a href="#method.split" class="anchor"></a><a class="srclink" href="../src/rstream/operator/split.rs.html#28-41" title="goto source code">[src]</a></h4><div class="docblock"><p>Split the stream into <code>splits</code> streams, each with all the elements of the first one.</p>
<p>This will effectively duplicate every item in the stream into the newly created streams.</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-32" class="section-header"><a href="#example-32">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">splits</span> <span class="op">=</span> <span class="ident">s</span>.<span class="ident">split</span>(<span class="number">3</span>);
<span class="kw">let</span> <span class="ident">a</span> <span class="op">=</span> <span class="ident">splits</span>.<span class="ident">pop</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">b</span> <span class="op">=</span> <span class="ident">splits</span>.<span class="ident">pop</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">c</span> <span class="op">=</span> <span class="ident">splits</span>.<span class="ident">pop</span>().<span class="ident">unwrap</span>();</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-32" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-32" class="anchor"></a><a class="srclink" href="../src/rstream/operator/window/mod.rs.html#108-146" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.window_all" class="method"><code>pub fn <a href="#method.window_all" class="fnname">window_all</a>&lt;WinOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, WinDescr:&nbsp;<a class="trait" href="operator/window/trait.WindowDescription.html" title="trait rstream::operator::window::WindowDescription">WindowDescription</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, WinOut&gt;&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;descr: WinDescr<br>) -&gt; <a class="struct" href="struct.WindowedStream.html" title="struct rstream::WindowedStream">WindowedStream</a>&lt;Out, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="type" href="type.KeyValue.html" title="type rstream::KeyValue">KeyValue</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Out&gt;&gt;, WinOut, WinDescr&gt;</code><a href="#method.window_all" class="anchor"></a><a class="srclink" href="../src/rstream/operator/window/mod.rs.html#137-145" title="goto source code">[src]</a></h4><div class="docblock"><p>Apply a window to the stream.</p>
<p>Returns a <a href="struct.WindowedStream.html" title="WindowedStream"><code>WindowedStream</code></a>, with windows created following the behavior specified
by the passed <a href="operator/window/trait.WindowDescription.html" title="WindowDescription"><code>WindowDescription</code></a>.</p>
<p><strong>Note</strong>: this operator cannot be parallelized, so all the stream elements are sent to a
single node where the creation and aggregation of the windows are done.</p>
<h2 id="example-33" class="section-header"><a href="#example-33">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>((<span class="number">0</span>..<span class="number">5</span>)));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s</span>
    .<span class="ident">window_all</span>(<span class="ident">CountWindow::tumbling</span>(<span class="number">2</span>))
    .<span class="ident">sum</span>()
    .<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>();
<span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">vec!</span>[<span class="number">0</span> <span class="op">+</span> <span class="number">1</span>, <span class="number">2</span> <span class="op">+</span> <span class="number">3</span>, <span class="number">4</span>]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-33" class="impl"><code class="in-band">impl&lt;Out1:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain1&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out1, OperatorChain1&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain1: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out1&gt; + 'static,&nbsp;</span></code><a href="#impl-33" class="anchor"></a><a class="srclink" href="../src/rstream/operator/zip.rs.html#112-156" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.zip" class="method"><code>pub fn <a href="#method.zip" class="fnname">zip</a>&lt;Out2:&nbsp;<a class="trait" href="operator/trait.ExchangeData.html" title="trait rstream::operator::ExchangeData">ExchangeData</a>, OperatorChain2&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;oth: <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out2, OperatorChain2&gt;<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Out1, Out2<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>, impl <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a>Out1, Out2<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain2: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out2&gt; + 'static,&nbsp;</span></code><a href="#method.zip" class="anchor"></a><a class="srclink" href="../src/rstream/operator/zip.rs.html#139-155" title="goto source code">[src]</a></h4><div class="docblock"><p>Given two <a href="struct.Stream.html" title="Stream"><code>Stream</code></a>s, zip their elements together: the resulting stream will be a stream of
pairs, each of which is an element from both streams respectively.</p>
<p><strong>Note</strong>: all the elements after the end of one of the streams are discarded (i.e. the
resulting stream will have a number of elements that is the minimum between the lengths of
the two input streams).</p>
<p><strong>Note</strong>: this operator will split the current block.</p>
<h2 id="example-34" class="section-header"><a href="#example-34">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="macro">vec!</span>[<span class="string">&#39;A&#39;</span>, <span class="string">&#39;B&#39;</span>, <span class="string">&#39;C&#39;</span>, <span class="string">&#39;D&#39;</span>].<span class="ident">into_iter</span>()));
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="ident">env</span>.<span class="ident">stream</span>(<span class="ident">IteratorSource::new</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="ident">into_iter</span>()));
<span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="ident">s1</span>.<span class="ident">zip</span>(<span class="ident">s2</span>).<span class="ident">collect_vec</span>();

<span class="ident">env</span>.<span class="ident">execute</span>();

<span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">get</span>().<span class="ident">unwrap</span>(), <span class="macro">vec!</span>[(<span class="string">&#39;A&#39;</span>, <span class="number">1</span>), (<span class="string">&#39;B&#39;</span>, <span class="number">2</span>), (<span class="string">&#39;C&#39;</span>, <span class="number">3</span>)]);</pre></div>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-34" class="impl"><code class="in-band">impl&lt;Out:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, OperatorChain&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;Out&gt; + 'static,&nbsp;</span></code><a href="#impl-34" class="anchor"></a><a class="srclink" href="../src/rstream/stream.rs.html#113-330" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.add_operator" class="method"><code>pub fn <a href="#method.add_operator" class="fnname">add_operator</a>&lt;NewOut:&nbsp;<a class="trait" href="operator/trait.Data.html" title="trait rstream::operator::Data">Data</a>, Op, GetOp&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_operator: GetOp<br>) -&gt; <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;NewOut, Op&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Op: <a class="trait" href="operator/trait.Operator.html" title="trait rstream::operator::Operator">Operator</a>&lt;NewOut&gt; + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;GetOp: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(OperatorChain) -&gt; Op,&nbsp;</span></code><a href="#method.add_operator" class="anchor"></a><a class="srclink" href="../src/rstream/stream.rs.html#126-143" title="goto source code">[src]</a></h4><div class="docblock"><p>Add a new operator to the current chain inside the stream. This consumes the stream and
returns a new one with the operator added.</p>
<p><code>get_operator</code> is a function that is given the previous chain of operators and should return
the new chain of operators. The new chain cannot be simply passed as argument since it is
required to do a partial move of the <code>InnerBlock</code> structure.</p>
<p><strong>Note</strong>: this is an advanced function that manipulates the block structure. Probably it is
not what you are looking for.</p>
</div></div></details><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><h3 id="impl-RefUnwindSafe" class="impl"><code class="in-band">impl&lt;Out, OperatorChain&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt;</code><a href="#impl-RefUnwindSafe" class="anchor"></a></h3><h3 id="impl-Send" class="impl"><code class="in-band">impl&lt;Out, OperatorChain&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt;</code><a href="#impl-Send" class="anchor"></a></h3><h3 id="impl-Sync" class="impl"><code class="in-band">impl&lt;Out, OperatorChain&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,&nbsp;</span></code><a href="#impl-Sync" class="anchor"></a></h3><h3 id="impl-Unpin" class="impl"><code class="in-band">impl&lt;Out, OperatorChain&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;OperatorChain: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;Out: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,&nbsp;</span></code><a href="#impl-Unpin" class="anchor"></a></h3><h3 id="impl-UnwindSafe" class="impl"><code class="in-band">impl&lt;Out, OperatorChain&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Stream.html" title="struct rstream::Stream">Stream</a>&lt;Out, OperatorChain&gt;</code><a href="#impl-UnwindSafe" class="anchor"></a></h3></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-Any" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Any" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#131-135" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.type_id" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a href="#method.type_id" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#132" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-Borrow%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Borrow%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208-213" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.borrow" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a href="#method.borrow" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#210" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-BorrowMut%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#216-220" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.borrow_mut" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a href="#method.borrow_mut" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#217" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-From%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href="#impl-From%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#544-548" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.from" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</code><a href="#method.from" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#545" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-Into%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-Into%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#533-540" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="method.into" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</code><a href="#method.into" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#537" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-TryFrom%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#581-590" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="associatedtype.Error" class="type trait-impl"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code><a href="#associatedtype.Error" class="anchor"></a></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_from" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a href="#method.try_from" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#587" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-TryInto%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryInto%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#567-576" title="goto source code">[src]</a></h3></summary><div class="impl-items"><h4 id="associatedtype.Error-1" class="type trait-impl"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code><a href="#associatedtype.Error-1" class="anchor"></a></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_into" class="method hidden trait-impl"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a href="#method.try_into" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#573" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-VZip%3CV%3E" class="impl"><code class="in-band">impl&lt;V, T&gt; VZip&lt;V&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;V: MultiLane&lt;T&gt;,&nbsp;</span></code><a href="#impl-VZip%3CV%3E" class="anchor"></a></h3></summary><div class="impl-items"><h4 id="method.vzip" class="method hidden trait-impl"><code>pub fn <a href="#tymethod.vzip" class="fnname">vzip</a>(self) -&gt; V</code><a href="#method.vzip" class="anchor"></a></h4></div></details><h3 id="impl-UnsafeAny" class="impl"><code class="in-band">impl&lt;T&gt; UnsafeAny for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a>,&nbsp;</span></code><a href="#impl-UnsafeAny" class="anchor"></a></h3></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="rstream" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script></body></html>